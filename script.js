jobsData = [
    {
        id: 1,
        title: "Senior Frontend Developer",
        company: "TechCorp Solutions",
        location: "Remote",
        jobType: "full-time",
        salary: "R850,000 - R1,200,000",
        salaryRange: "800000-1200000",
        description: "We are looking for an experienced Frontend Developer to join our growing team. You will be responsible for building user interfaces and ensuring great user experience.",
        requirements: [
            "5+ years of React experience",
            "Strong knowledge of JavaScript, HTML, CSS",
            "Experience with modern build tools",
            "Knowledge of responsive design principles"
        ],
        benefits: [
            "Medical aid",
            "Retirement fund",
            "Flexible working hours",
            "Professional development budget"
        ],
        postedDate: "2025-08-10"
    },
    {
        id: 2,
        title: "Full Stack Developer",
        company: "StartupX",
        location: "Cape Town, SA (Remote Option)",
        jobType: "full-time",
        salary: "R900,000 - R1,300,000",
        salaryRange: "800000-1200000",
        description: "Join our innovative startup as a Full Stack Developer. Work on cutting-edge projects and help shape the future of our platform.",
        requirements: [
            "3+ years of full-stack development",
            "Experience with Node.js and React",
            "Database design and optimization",
            "RESTful API development"
        ],
        benefits: [
            "Equity package",
            "Medical aid",
            "Unlimited leave",
            "Latest tech equipment"
        ],
        postedDate: "2025-08-08"
    },
    {
        id: 3,
        title: "Backend Engineer",
        company: "DataFlow Inc",
        location: "Johannesburg, SA",
        jobType: "full-time",
        salary: "R950,000 - R1,400,000",
        salaryRange: "1200000+",
        description: "We need a skilled Backend Engineer to design and implement scalable server-side applications and APIs.",
        requirements: [
            "4+ years of backend development",
            "Strong Python or Node.js skills",
            "Experience with cloud platforms (AWS/GCP)",
            "Database design and optimization"
        ],
        benefits: [
            "Competitive salary",
            "Medical and dental aid",
            "Remote work options",
            "Annual conference budget"
        ],
        postedDate: "2025-08-05"
    },
    {
        id: 4,
        title: "React Developer (Contract)",
        company: "AgencyPro",
        location: "Remote",
        jobType: "contract",
        salary: "R650/hour",
        salaryRange: "800000-1200000",
        description: "Short-term contract position for an experienced React developer to help build a new e-commerce platform.",
        requirements: [
            "3+ years React experience",
            "TypeScript knowledge",
            "E-commerce platform experience",
            "Available for 3-month contract"
        ],
        benefits: [
            "Flexible schedule",
            "Remote work",
            "Opportunity for extension",
            "Direct client interaction"
        ],
        postedDate: "2025-08-12"
    },
    {
        id: 5,
        title: "Junior Web Developer",
        company: "WebSolutions Ltd",
        location: "Durban, SA",
        jobType: "full-time",
        salary: "R450,000 - R600,000",
        salaryRange: "0-500000",
        description: "Great opportunity for a junior developer to grow and learn in a supportive environment. Perfect for recent graduates.",
        requirements: [
            "1-2 years of web development experience",
            "Basic knowledge of HTML, CSS, JavaScript",
            "Eagerness to learn new technologies",
            "Good communication skills"
        ],
        benefits: [
            "Mentorship program",
            "Medical aid",
            "Learning and development budget",
            "Flexible working hours"
        ],
        postedDate: "2025-08-15"
    },
    {
        id: 6,
        title: "DevOps Engineer",
        company: "CloudTech Systems",
        location: "Remote",
        jobType: "full-time",
        salary: "R1,000,000 - R1,500,000",
        salaryRange: "1200000+",
        description: "Looking for a DevOps Engineer to help automate and streamline our deployment processes and infrastructure management.",
        requirements: [
            "4+ years DevOps experience",
            "Docker and Kubernetes expertise",
            "AWS/Azure cloud platforms",
            "CI/CD pipeline experience"
        ],
        benefits: [
            "Top-tier salary",
            "Stock options",
            "Full medical coverage",
            "Work from home flexibility"
        ],
        postedDate: "2025-08-07"
    },
    {
        id: 7,
        title: "Python Developer (Remote)",
        company: "DataMine Solutions",
        location: "Remote",
        jobType: "full-time",
        salary: "R800,000 - R1,100,000",
        salaryRange: "800000-1200000",
        description: "Join our data analytics team as a Python Developer. Work on machine learning projects and data pipeline development from anywhere.",
        requirements: [
            "3+ years Python development",
            "Experience with Django/Flask",
            "Data analysis with pandas/numpy",
            "Machine learning libraries knowledge"
        ],
        benefits: [
            "Fully remote position",
            "Medical aid",
            "Performance bonuses",
            "Home office setup allowance"
        ],
        postedDate: "2025-08-14"
    },
    {
        id: 8,
        title: "Mobile App Developer",
        company: "MobiTech Africa",
        location: "Remote",
        jobType: "full-time",
        salary: "R700,000 - R1,000,000",
        salaryRange: "500000-800000",
        description: "Develop cutting-edge mobile applications for iOS and Android platforms. Remote-first company with flexible working arrangements.",
        requirements: [
            "2+ years mobile development",
            "React Native or Flutter experience",
            "Native iOS/Android development",
            "App Store deployment experience"
        ],
        benefits: [
            "Remote-first culture",
            "Flexible hours",
            "Medical aid",
            "Annual team retreats"
        ],
        postedDate: "2025-08-11"
    },
    {
        id: 9,
        title: "UI/UX Designer (Remote)",
        company: "DesignForward",
        location: "Remote",
        jobType: "full-time",
        salary: "R600,000 - R900,000",
        salaryRange: "500000-800000",
        description: "Create beautiful and functional user experiences for web and mobile applications. Work with international clients from your home office.",
        requirements: [
            "3+ years UI/UX design experience",
            "Proficiency in Figma, Sketch, Adobe Creative Suite",
            "User research and testing experience",
            "Portfolio showcasing mobile and web designs"
        ],
        benefits: [
            "100% remote work",
            "International client exposure",
            "Creative freedom",
            "Professional development budget"
        ],
        postedDate: "2025-08-13"
    },
    {
        id: 10,
        title: "WordPress Developer",
        company: "WebCraft Studios",
        location: "Remote",
        jobType: "part-time",
        salary: "R400/hour",
        salaryRange: "500000-800000",
        description: "Part-time WordPress developer needed for custom theme development and plugin customization. Perfect for freelancers looking for consistent work.",
        requirements: [
            "2+ years WordPress development",
            "PHP and MySQL proficiency",
            "Custom theme development",
            "Plugin development experience"
        ],
        benefits: [
            "Flexible part-time hours",
            "Remote work",
            "Project variety",
            "Long-term partnership opportunity"
        ],
        postedDate: "2025-08-16"
    },
    {
        id: 11,
        title: "Cybersecurity Specialist",
        company: "SecureNet Africa",
        location: "Remote",
        jobType: "full-time",
        salary: "R1,200,000 - R1,800,000",
        salaryRange: "1200000+",
        description: "Protect our clients' digital assets as a Cybersecurity Specialist. Work remotely while ensuring the highest security standards.",
        requirements: [
            "4+ years cybersecurity experience",
            "CISSP or CEH certification preferred",
            "Penetration testing experience",
            "Incident response expertise"
        ],
        benefits: [
            "Premium salary package",
            "Remote work flexibility",
            "Certification reimbursement",
            "Medical aid and life insurance"
        ],
        postedDate: "2025-08-09"
    },
    {
        id: 12,
        title: "Content Management Developer",
        company: "ContentFlow Systems",
        location: "Remote",
        jobType: "contract",
        salary: "R550/hour",
        salaryRange: "800000-1200000",
        description: "6-month contract for a developer experienced in headless CMS solutions. Build and maintain content management systems for various clients.",
        requirements: [
            "Experience with Strapi, Contentful, or similar",
            "GraphQL and REST API development",
            "React/Vue.js frontend integration",
            "6-month availability"
        ],
        benefits: [
            "High hourly rate",
            "Remote work",
            "Flexible schedule",
            "Potential for permanent role"
        ],
        postedDate: "2025-08-17"
    }
];


const jobsContainer = document.getElementById('jobsContainer');
const searchInput = document.getElementById('searchInput');
const locationFilter = document.getElementById('locationFilter');
const jobTypeFilter = document.getElementById('jobType');
const salaryRangeFilter = document.getElementById('salaryRange');
const searchBtn = document.getElementById('searchBtn');
const modal = document.getElementById('jobModal');
const closeModal = document.querySelector('.close');
const mobileMenuToggle = document.getElementById('mobile-menu');
const navMenu = document.querySelector('.nav-menu');


let filteredJobs = [...jobsData];
let currentFilters = {
    search: '',
    location: '',
    jobType: '',
    salaryRange: ''
};


document.addEventListener('DOMContentLoaded', function() {
    console.log('Page loaded, initializing job board...');
    displayJobs(jobsData);
    setupEventListeners();
    setupSmoothScrolling();
});


function setupEventListeners() {
    console.log('Setting up event listeners...');
    
    
    if (searchBtn) {
        searchBtn.addEventListener('click', function(e) {
            e.preventDefault();
            handleSearch();
        });
    }
    
    if (searchInput) {
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleSearch();
            }
        });
        
        
        searchInput.addEventListener('input', debounce(handleSearch, 300));
    }

    
    if (locationFilter) {
        locationFilter.addEventListener('change', handleFilters);
    }
    if (jobTypeFilter) {
        jobTypeFilter.addEventListener('change', handleFilters);
    }
    if (salaryRangeFilter) {
        salaryRangeFilter.addEventListener('change', handleFilters);
    }

    if (closeModal) {
        closeModal.addEventListener('click', closeJobModal);
    }
    
    window.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeJobModal();
        }
    });

    
    if (mobileMenuToggle && navMenu) {
        mobileMenuToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
        });
    }
}


function displayJobs(jobs) {
    console.log('Displaying jobs:', jobs.length);
    
    if (!jobsContainer) {
        console.error('Jobs container not found!');
        return;
    }
    
    if (jobs.length === 0) {
        jobsContainer.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                <i class="fas fa-search" style="font-size: 3rem; color: #ccc; margin-bottom: 1rem;"></i>
                <h3 style="color: #666; margin-bottom: 1rem;">No jobs found</h3>
                <p style="color: #999;">Try adjusting your search criteria or filters</p>
            </div>
        `;
        return;
    }

    jobsContainer.innerHTML = jobs.map(job => `
        <div class="job-card" onclick="openJobModal(${job.id})">
            <div class="job-header">
                <div>
                    <h3 class="job-title">${job.title}</h3>
                    <p class="company-name">${job.company}</p>
                </div>
                <span class="job-type">${formatJobType(job.jobType)}</span>
            </div>
            
            <div class="job-details">
                <div class="detail-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>${job.location}</span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-dollar-sign"></i>
                    <span>${job.salary}</span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Posted ${formatDate(job.postedDate)}</span>
                </div>
            </div>
            
            <p class="job-description">${truncateText(job.description, 120)}</p>
            
            <button class="apply-btn" onclick="event.stopPropagation(); applyForJob(${job.id})">
                <i class="fas fa-paper-plane"></i>
                Apply Now
            </button>
        </div>
    `).join('');
}


function handleSearch() {
    console.log('Search triggered!');
    if (searchInput) {
        currentFilters.search = searchInput.value.toLowerCase();
    }
    if (locationFilter) {
        currentFilters.location = locationFilter.value;
    }
    applyAllFilters();
}


function handleFilters() {
    console.log('Filters changed!');
    if (jobTypeFilter) {
        currentFilters.jobType = jobTypeFilter.value;
    }
    if (salaryRangeFilter) {
        currentFilters.salaryRange = salaryRangeFilter.value;
    }
    if (locationFilter) {
        currentFilters.location = locationFilter.value;
    }
    applyAllFilters();
}


function applyAllFilters() {
    console.log('Applying filters:', currentFilters);
    
    filteredJobs = jobsData.filter(job => {
        
        const searchMatch = !currentFilters.search || 
            job.title.toLowerCase().includes(currentFilters.search) ||
            job.company.toLowerCase().includes(currentFilters.search) ||
            job.description.toLowerCase().includes(currentFilters.search);

        
        const locationMatch = !currentFilters.location || 
            job.location.toLowerCase().includes(currentFilters.location.toLowerCase());

        
        const jobTypeMatch = !currentFilters.jobType || job.jobType === currentFilters.jobType;

        
        let salaryMatch = true;
        if (currentFilters.salaryRange) {
            const filterRange = currentFilters.salaryRange;
            const jobSalaryRange = job.salaryRange;
            
            
            if (filterRange === jobSalaryRange) {
                salaryMatch = true;
            } else if (filterRange === '1200000+' && (jobSalaryRange === '1200000+' || jobSalaryRange.includes('1200000'))) {
                salaryMatch = true;
            } else if (filterRange !== '1200000+' && jobSalaryRange === '1200000+') {
                salaryMatch = false;
            } else {
                
                const filterParts = filterRange.split('-');
                const jobParts = jobSalaryRange.split('-');
                
                if (filterParts.length === 2 && jobParts.length === 2) {
                    const filterMin = parseInt(filterParts[0]);
                    const filterMax = parseInt(filterParts[1]);
                    const jobMin = parseInt(jobParts[0]);
                    const jobMax = parseInt(jobParts[1]);
                    
                    
                    salaryMatch = !(filterMax < jobMin || filterMin > jobMax);
                } else {
                    salaryMatch = filterRange === jobSalaryRange;
                }
            }
        }

        return searchMatch && locationMatch && jobTypeMatch && salaryMatch;
    });

    console.log('Filtered jobs:', filteredJobs.length);
    displayJobs(filteredJobs);
}


function openJobModal(jobId) {
    console.log('Opening modal for job:', jobId);
    const job = jobsData.find(j => j.id === jobId);
    if (!job || !modal) return;

    const modalContent = document.getElementById('jobDetails');
    if (!modalContent) return;
    
    modalContent.innerHTML = `
        <div style="padding-right: 2rem;">
            <div style="margin-bottom: 2rem;">
                <h2 style="color: #2c3e50; margin-bottom: 0.5rem;">${job.title}</h2>
                <h3 style="color: #667eea; margin-bottom: 1rem;">${job.company}</h3>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <span class="job-type">${formatJobType(job.jobType)}</span>
                    <span style="background: #e8f5e8; color: #2e7d2e; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9rem;">
                        <i class="fas fa-map-marker-alt"></i> ${job.location}
                    </span>
                    <span style="background: #fff3cd; color: #856404; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9rem;">
                        <i class="fas fa-dollar-sign"></i> ${job.salary}
                    </span>
                </div>
            </div>

            <div style="margin-bottom: 2rem;">
                <h4 style="color: #2c3e50; margin-bottom: 1rem;">Job Description</h4>
                <p style="line-height: 1.7; color: #555;">${job.description}</p>
            </div>

            <div style="margin-bottom: 2rem;">
                <h4 style="color: #2c3e50; margin-bottom: 1rem;">Requirements</h4>
                <ul style="padding-left: 1.5rem; color: #555;">
                    ${job.requirements.map(req => `<li style="margin-bottom: 0.5rem;">${req}</li>`).join('')}
                </ul>
            </div>

            <div style="margin-bottom: 2rem;">
                <h4 style="color: #2c3e50; margin-bottom: 1rem;">Benefits</h4>
                <ul style="padding-left: 1.5rem; color: #555;">
                    ${job.benefits.map(benefit => `<li style="margin-bottom: 0.5rem;">${benefit}</li>`).join('')}
                </ul>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button onclick="applyForJob(${job.id})" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 15px 40px; border-radius: 8px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: transform 0.2s;">
                    <i class="fas fa-paper-plane"></i>
                    Apply Now
                </button>
            </div>
        </div>
    `;

    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function closeJobModal() {
    if (modal) {
        modal.style.display = 'none';
    }
    document.body.style.overflow = 'auto';
}


function applyForJob(jobId) {
    const job = jobsData.find(j => j.id === jobId);
    if (job) {
        alert(`Thank you for your interest in the ${job.title} position at ${job.company}!\n\nIn a real application, this would redirect you to an application form or email.\n\nFor now, this is just a demo.`);
    }
}


function formatJobType(type) {
    const types = {
        'full-time': 'Full Time',
        'part-time': 'Part Time',
        'contract': 'Contract',
        'internship': 'Internship'
    };
    return types[type] || type;
}

function formatDate(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diffTime = Math.abs(now - date);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffDays === 1) return 'yesterday';
    if (diffDays < 7) return `${diffDays} days ago`;
    if (diffDays < 30) return `${Math.ceil(diffDays / 7)} weeks ago`;
    return `${Math.ceil(diffDays / 30)} months ago`;
}

function truncateText(text, maxLength) {
    if (text.length <= maxLength) return text;
    return text.substr(0, maxLength) + '...';
}

function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

function setupSmoothScrolling() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                if (navMenu) {
                    navMenu.classList.remove('active');
                }
            }
        });
    });
}